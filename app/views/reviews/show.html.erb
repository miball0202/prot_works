
<h4>プロット：<%= link_to @review.prot.title, prot_path(@review.prot)%></h4>
<hr>
<div class="jumbotron">
  <h3><%= @review.title %></h3>
  <br>
  <hr>

    <p><%= @review.content %></p>
  <br><br><br><br><br>
</div>
<% if @review.user_id == current_user.id %>
  <div class="text-right">
    <%= link_to "レビュー編集", edit_prot_review_path(@review.prot_id, @review), class: "btn btn-success" %>
    <%= link_to "レビュー削除", prot_review_path(@review.prot_id, @review), method: :delete, class: "btn btn-danger", data: { confirm: "よろしいですか？"} %>
  </div>
<% end %>

<% if @review.comments.length > 1 %>
  <h3>コメント</h3>
  <hr>
  <div class="jumbotron">
    <% @review.comments.each do |comment| %>
      <% unless comment.body.blank? %>
        <div class="alert alert-light">
          <%= comment.user.nick_name %>:<br>
          <p><%= comment.body %></p>
        </div>
        <hr>
      <% end %>
    <% end %>
  </div>
<% end %>


<%= form_with(model: @comment, local: true, url: prot_review_comments_path(params[:prot_id], params[:id]) ) do |f| %>
  <% if @comment.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@comment.errors.count, "error") %>件のエラーがあります</h2>

      <ul>
      <% @comment.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.text_area :body,rows: 10, class: "form-control" %>
  </div>

  <div class="field">
    <%= f.hidden_field :review_id, value: params[:id],class: "form-control" %>
  </div>
  <br>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
<br><br><br>
